# toto list

* ~~cache 需要换掉~~
* ~~节点互联，换成gen_rpc方式,尽量支持一机多服，不需要改配置~~
* ~~mnesia的使用尽量放在中心服或者提供一种机制各个服务器可以自动生成~~
* ~~重新构建dbs的设计，针对上层提供接口，隐藏底层实现~~
* 登录系统提供排队，放到最后来做
* ~~如果决定采用任意服务器可登录的机制，需要实现管控机制~~
* 预警策略
* 优化地图玩家、怪物、宠物等储存，遍历等等
* 玩家、宠物战斗相关的数据划分
* ~~mod_??全部转化成纯模块， 将otp剥离转入serv_?~~
* 防加速
* ~~是否可以将地图上所有的对象(Monster, NPC, Pet, Player) 按分类放入同一个ETS?~~ 
* 玩家帧率控制 消息大小或者*消息量*
* 太过于频繁变化的list操作比如属性计算会导致内存持续升高。GC可以解决这个问题，但是要想个方法避免这种情况(分为数据进程、计算(逻辑)进程对)
* **PRODUCT** 环境中去掉test目录下的模块
* 针对客户端的断线重连，*客户端* 要有一定的退避(back-off)算法(比如重试时间用斐波拉契数列、指数式退避、随机退避)，防范累加效应
* ~~针对于跨服实现方式是遵循原来的还是地图跨服化需要整理~~
* ~~针对于公共功能都全服化，需要设计一种分摊中心服压力的方式~~
* gen_rpc一机多服的支持要优化端口分布
* 针对很多逻辑进程要通过窗口进程发送消息，转成直接向目标进程发送
* 尽量使用进程名，而不是进程ID来发送消息，因为ID会被重用
* 调整配置表的目录，加速编译(只编译指定地区的配置文件)
* 对消息中出现的整数、浮点数进行调整和编码优化(客户端&服务器)
* 对于群发的消息优化
* 对于地图管理优化(可以控制开服开启多少线路、是否自动回收、保持多少条线等等)

* 类似于特殊的地图ID、物品、buff等等，不要在代码里写，尽量新加一种类型，让策划控制
* 切地图因为是call调用，其实主要在于获取地图资源，所以看看是否能够持续优化
* 每个进程头需要统计处理消息的量（开始时间，结束时间，数量）
* 应该有个工具箱，检测服务器性能比如网络，io等等
* 优化掉某些ets 比如日志的flagets 使用application:set_env替代
